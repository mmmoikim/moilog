<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>함수형 자바스크립트 | MOILOG</title>
    <meta name="description" content="Hello! I&#39;m web developer. this is study blog.">
    <meta name="google-site-verification" content="Np5Qu68ys0COB1T9fZ8rfxfrr_SLcHqzfmu9Q03K8YY">
    
    <link rel="preload" href="/moilog/assets/css/0.styles.6ef3f76f.css" as="style"><link rel="preload" href="/moilog/assets/js/app.ae515986.js" as="script"><link rel="preload" href="/moilog/assets/js/31.9dba47c1.js" as="script"><link rel="prefetch" href="/moilog/assets/js/10.47d880df.js"><link rel="prefetch" href="/moilog/assets/js/11.dff6fbc0.js"><link rel="prefetch" href="/moilog/assets/js/12.67e84a35.js"><link rel="prefetch" href="/moilog/assets/js/13.eb2c8d3f.js"><link rel="prefetch" href="/moilog/assets/js/14.b66233e1.js"><link rel="prefetch" href="/moilog/assets/js/15.42b1e262.js"><link rel="prefetch" href="/moilog/assets/js/16.38463800.js"><link rel="prefetch" href="/moilog/assets/js/17.d9e791e4.js"><link rel="prefetch" href="/moilog/assets/js/18.3d9a233f.js"><link rel="prefetch" href="/moilog/assets/js/19.b4485bbc.js"><link rel="prefetch" href="/moilog/assets/js/20.e9f46bc7.js"><link rel="prefetch" href="/moilog/assets/js/21.e0dcecb4.js"><link rel="prefetch" href="/moilog/assets/js/22.0c1252c7.js"><link rel="prefetch" href="/moilog/assets/js/23.fb1571df.js"><link rel="prefetch" href="/moilog/assets/js/24.aa6c24c2.js"><link rel="prefetch" href="/moilog/assets/js/25.61f24dec.js"><link rel="prefetch" href="/moilog/assets/js/26.0c042d9c.js"><link rel="prefetch" href="/moilog/assets/js/27.02c89de4.js"><link rel="prefetch" href="/moilog/assets/js/28.b4444a46.js"><link rel="prefetch" href="/moilog/assets/js/29.c74e9844.js"><link rel="prefetch" href="/moilog/assets/js/3.2d797fd0.js"><link rel="prefetch" href="/moilog/assets/js/30.bc640131.js"><link rel="prefetch" href="/moilog/assets/js/32.2e1c33c2.js"><link rel="prefetch" href="/moilog/assets/js/33.a94204db.js"><link rel="prefetch" href="/moilog/assets/js/34.473e8ca3.js"><link rel="prefetch" href="/moilog/assets/js/35.87817426.js"><link rel="prefetch" href="/moilog/assets/js/36.5c0a4dae.js"><link rel="prefetch" href="/moilog/assets/js/37.d97fa9ca.js"><link rel="prefetch" href="/moilog/assets/js/38.80d4853a.js"><link rel="prefetch" href="/moilog/assets/js/39.920784a2.js"><link rel="prefetch" href="/moilog/assets/js/4.9adc46b6.js"><link rel="prefetch" href="/moilog/assets/js/40.2ad76590.js"><link rel="prefetch" href="/moilog/assets/js/41.64ecf26b.js"><link rel="prefetch" href="/moilog/assets/js/42.19e25c0a.js"><link rel="prefetch" href="/moilog/assets/js/43.af9173eb.js"><link rel="prefetch" href="/moilog/assets/js/44.6d8303aa.js"><link rel="prefetch" href="/moilog/assets/js/45.ec931762.js"><link rel="prefetch" href="/moilog/assets/js/46.c455561e.js"><link rel="prefetch" href="/moilog/assets/js/47.1b6ebe90.js"><link rel="prefetch" href="/moilog/assets/js/48.7e50bdca.js"><link rel="prefetch" href="/moilog/assets/js/49.eeb5be00.js"><link rel="prefetch" href="/moilog/assets/js/5.9c1ee8f1.js"><link rel="prefetch" href="/moilog/assets/js/50.8d4d21e5.js"><link rel="prefetch" href="/moilog/assets/js/51.7f4c6f81.js"><link rel="prefetch" href="/moilog/assets/js/52.27c9acd3.js"><link rel="prefetch" href="/moilog/assets/js/53.3dccbb50.js"><link rel="prefetch" href="/moilog/assets/js/6.b4a4f99c.js"><link rel="prefetch" href="/moilog/assets/js/7.77d08323.js"><link rel="prefetch" href="/moilog/assets/js/8.07a7ae9c.js"><link rel="prefetch" href="/moilog/assets/js/9.e07a472c.js"><link rel="prefetch" href="/moilog/assets/js/vendors~docsearch.a77ba3c3.js">
    <link rel="stylesheet" href="/moilog/assets/css/0.styles.6ef3f76f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/moilog/" class="home-link router-link-active"><img src="/moilog/logo.png" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/moilog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/moilog/post/list.html" class="nav-link">Post</a></div> <a href="https://github.com/mmmoikim/moilog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/moilog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/moilog/post/list.html" class="nav-link">Post</a></div> <a href="https://github.com/mmmoikim/moilog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>WEB</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>REACT</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>VUE</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>javascript</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/moilog/post/javascript/this.html" class="sidebar-link">this</a></li><li><a href="/moilog/post/javascript/lodash.html" class="sidebar-link">lodash</a></li><li><a href="/moilog/post/javascript/bubble-capture.html" class="sidebar-link">event 버블링, 캡쳐링</a></li><li><a href="/moilog/post/javascript/es-modules.html" class="sidebar-link">es-modules</a></li><li><a href="/moilog/post/javascript/functional-programming.html" class="active sidebar-link">함수형 자바스크립트</a></li><li><a href="/moilog/post/javascript/modern-browser.html" class="sidebar-link">모던 웹 브라우저</a></li><li><a href="/moilog/post/javascript/objective-javascript.html" class="sidebar-link">객체지향 자바스크립트</a></li><li><a href="/moilog/post/javascript/typescript-programming.html" class="sidebar-link">타입스크립트 프로그래밍</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>how javascript work</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>java</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Etc</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"><div class="page-mask"> <div class="content"><h1 id="함수형-자바스크립트"><a href="#함수형-자바스크립트" aria-hidden="true" class="header-anchor">#</a> 함수형 자바스크립트</h1> <ul><li>좋은 프로그래밍의 척도 : 사용성, 성능, 확장성, 기획변경에 대한 대응력</li> <li>부수효과를 멀리, 조합성 강조</li> <li>오류를 줄이기 위해, 조합성, 모듈화 수준을 높이기 위해, 생산성, 안전성 높이기</li></ul> <p>함수로 함수를 리턴하는 기법
함수는 값을 리턴 할 수 있고 함수는 값이 될 수 있다.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">addMaker</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> add5 <span class="token operator">=</span> <span class="token function">addMarker</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">add5</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>a는 불변한 상수로 쓰임</li> <li>값으로서의 함수, 클로저를 이용한 함수형 자바스크립트 스타일</li></ul> <p>필터 함수</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>newList <span class="token operator">=</span> <span class="token function">filer</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> 익명함수<span class="token punctuation">)</span>
</code></pre></div><ul><li><p>필터 함수는 익명함수가 어떤 일을 하지 모름, 실행 여부는 익명함수에게 위임</p></li> <li><p>이전값의 상태를 변경 하지 않고 새로운 값을 만드는식으로 값을 다루는 것이 함수형 프로그래밍의 콘셉</p></li> <li><p>필터 함수는 항상 동일하게 동작, 외/내부의 상태 변화에 의존성이 없음</p></li> <li><p>결과 리스트는 필터 함수를 통해 최초로 만들어 졌고 외부의 상태와 무관하며 외부에서 접근을 할 수 없음</p></li> <li><p>결과를 전달 하고 나면 필터와의 연관성도 없어짐</p></li> <li><p>절차지향 프로그래밍에서는 탑다운으로 변수 값을 변경하며 진행</p></li> <li><p>객체지향 프로그래밍에서는 객체를 만들고 객체간의 협업을 통해 로직을 만듬, 이벤트 등으로 서로 연결 한 후 상태의 변화를 감지해 자신의 값을 바꾸거나 상대의 메소드를 실행해서 상태를 변경한다.</p></li> <li><p>함수형 프로그래밍에서는 항상 동일하게 동작 하는 함수를 만들고 보조 함수를 조합하는 식으로 로직을 완성</p></li> <li><p>객체지향 프로그래밍에서도 객체를 복사해서 부수효과를 줄일 수 있다.</p></li> <li><p>함수형과 객체지향은 대척관계가 아닌 결국 함께 동작 해야함, 함수형에서도 객체를 다뤄야 하며 다만 기능을 확장 할 때 객체를 확장하느냐, 함수로 확장하느냐의 차이, 추상화의 단위가 다를 뿐</p></li></ul> <p>함수 중첩</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">filter</span><span class="token punctuation">(</span>users<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>age <span class="token operator">&gt;=</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>함수의 리턴값을 바로 다른 함수의 인자로 사용하면 변수 할당을 줄일 수 있다.</li></ul> <p>함수를 값으로 다루기</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">bvalue</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">bvalues</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token string">'hi'</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token string">'hello'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">bvalues</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token function">bvalue</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>find</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>funcion <span class="token function">findBy</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> list<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token keyword">return</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> predicate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">predicate</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>인자를 값이 아닌 함수로 변경하며 객체타입의 리스트도 받을 수 있게됨, 다형성</li> <li>보조 함수에 위임하며 find 함수는 데이터의 특성에서 분리</li></ul> <p>고차함수</p> <ul><li>함수를 인자로 받거나 리턴하는 함수</li> <li>익명함수에 인자를 확장해 활용도 높이기</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code>_<span class="token punctuation">.</span><span class="token function-variable function">findIndex</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> predicate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">predicate</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> list<span class="token punctuation">)</span> <span class="token keyword">return</span> i<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>_.identity</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>_<span class="token punctuation">.</span><span class="token function-variable function">identity</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

_<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token punctuation">,</span> _<span class="token punctuation">.</span>identity<span class="token punctuation">)</span>
</code></pre></div><ul><li>아무런 기능이 없어보이지만, filter랑 같이 쓰면 유용해짐</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code>_<span class="token punctuation">.</span><span class="token function-variable function">some</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> _<span class="token punctuation">.</span>identity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

_<span class="token punctuation">.</span><span class="token function-variable function">every</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">// index 끝까지 돌음</span>
<span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> _<span class="token punctuation">.</span>identity<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 리팩토링</span>
<span class="token keyword">function</span> <span class="token function">not</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">!</span>v<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">beq</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> a <span class="token operator">===</span> b<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

_<span class="token punctuation">.</span><span class="token function-variable function">every</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">beq</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">findIndex</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> not<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> 

<span class="token comment">// 기능 분리</span>
<span class="token keyword">function</span> <span class="token function">positive</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> _<span class="token punctuation">.</span>identity<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">negativeIndex</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> not<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

_<span class="token punctuation">.</span><span class="token function-variable function">some</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">not</span><span class="token punctuation">(</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token function">positive</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

_<span class="token punctuation">.</span><span class="token function-variable function">every</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">beq</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">negativeIndex</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>함수합성</p> <ul><li>함수를 쪼갤수록 함수 합성이 쉬워 진다</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code>_<span class="token punctuation">.</span><span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
<span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
<span class="token keyword">var</span> start <span class="token operator">=</span> args<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span>
		<span class="token keyword">var</span> result <span class="token operator">=</span> args<span class="token punctuation">[</span>start<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> result <span class="token operator">=</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

_<span class="token punctuation">.</span>some <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">compose</span><span class="token punctuation">(</span>not<span class="token punctuation">,</span> not<span class="token punctuation">,</span> positive<span class="token punctuation">)</span><span class="token punctuation">;</span>
_<span class="token punctuation">.</span>every <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">compose</span><span class="token punctuation">(</span><span class="token function">deq</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> negativeIndex<span class="token punctuation">)</span>
</code></pre></div><ul><li>코드 간결, 변수 선언이 적어진다.  새로운 인자와 변수가 등장하지 않고 함수의 내부가 보이지 않아서 새로운 상황이 생기지 않는다.</li></ul> <p>일급함수</p> <ul><li><p>함수는 일급객체이자 일급 함수이다. 자바스크립트에서 객체는 일급 객체이다.</p> <p>일급은 값을 다룰 수 있다는 의미로 아래 조건을 만족 해야 됨.</p> <ul><li>변수에 담을 수 있다.</li> <li>함수나 메서드의 인자로 넘길 수 있다.</li> <li>함수나 메서드에서 리턴할 수 있다.</li></ul></li> <li><p>자바스크립트에서 모든 값은 일급이다.</p></li> <li><p>일급 함수란</p> <ul><li>아무때나(런타임에서도) 선언이 가능하다.</li> <li>익명으로 선언할 수 있다.</li> <li>익명으로 선언한 함수도 함수나 메서드의 인자로 넘길 수 있다.</li></ul></li> <li><p>함수는 언제든지 선언할 수 있고 인자로 사용 할 수 있다.</p></li> <li><p>인자로 받은 함수를 실행할 수 있고, 함수를 리턴할 수 있다.</p></li></ul> <p>클로저</p> <ul><li>클로저는 자신이 생성될 때의 환경을 기억하는 함수이다.&gt; 클로저는 자신이 생성 될 때의 스코프에서 알 수 있었던 변수를 기억하는 함수이다.</li> <li>모든 함수는 상위 스코프를 가지며 자신이 정의되는 실행 컨텍스트 안에 있다. 모든 함수는 클로저인가??</li> <li>클로저가 되기 위한 조건 : 클로저로 만들 함수 내부에서 사용하는 변수 중에 내부에 선언 되지 않은 변수가 있어야 한다. 그 변수는 클로저를 생성하는 스코프에 선언되었거나 알 수 있어야 한다.</li> <li>상위 스코프에서 알 수 있는 변수를 자신이 사용하고 있지 않다면 기억 할 필요가 없다.</li> <li>글로벌 스코프를 제외 한 외부 스코프에 있던 변수 중 클로저 혹은 다른 누군가가 참조 하고 있지 않다면 실행 컨텍스트가 끝나면 카비지 컬렉션 대상이 된다.</li> <li>클로저 생성에 대해서는 v8 &gt; 파이어폭스 &gt; 사파리 순으로 최적화 가 잘 되어 있다. 2016년 기준</li> <li>v8과 파이어폭스는 외부 스코프의 변수가 하나도 없는 경우 클로저가 되지 않는다. 자신이 사용한 변수만 기억하며 외부 스코프의 나머지 변수는 전혀 기억하지 않는다. 클로저를 외부로 리턴하여 지속적으로 참조해야만 메모리에 남는다</li> <li>글로벌 스코프에 선언된 변수는 그 변수가 참조 됨에 관계 없이 유지가 되기 때문에 글로벌 스코프 변수를 참조하는 함수는 클로저가 아님</li> <li>node.js 사용되는 js파일의 스코프는 글로벌 스코프가 아니다.</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">f4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
	<span class="token keyword">function</span> <span class="token function">f5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token function">f5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">f4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>f4를 실행하면 f5는 클로저가  되지만 f5를 참조하는 곳이 없기 때문에 f4를 실행할 때만 생겼다가 사라진다.</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">f6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
		<span class="token keyword">function</span> <span class="token function">f7</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token function">f7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f8 <span class="token operator">=</span> <span class="token function">f6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f8</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>f7이 f8에 담겼기 때문에 클로저가 되었다. f6의 실행이 끝나도 a는 사라지지않음.</li> <li>메모리 누수를 메모리가 해제 되지 않았을 떄 발생하지만 위 상황은 개발자의 의도이기 때문에 메모리 누수라고 정의할 수는 없음, a는 한번 생기고 계속해서 생겨나지 않는다</li> <li>메모리 누수랑 개발자가 의도 하지 않았는데 메모리가 해제되지 않는 상황임</li> <li>반복적으로 메모리가 할당되어 늘어나고 해제가 되지 않는다면 문제이지만 위 경우는 그렇지 않다.</li> <li>필요한 상황에는 잘 선택해서 사용 해도 된다.</li> <li>스코프가 실행 되고 있는 컨텍스트 전체, 그 스코프의 모든 라인 어느 곳에 선언 된 변수든지 참조가능</li> <li>함수가 실행 될 때 마다 스코프 환경은 새로 만들어진다.</li> <li>클로저는 자신ㄴ이 생성되는 스코프의 실행 컨텍스트에서 만들어 졌거나 알수 있었던 변수중 언젠가 자신이 실행될 떄 사용할 변수들만 기억하는 함수이다. 클로저가 기억하는 변수값은 언제든지 남이나 자신에 의해 변경 될 수 있다.</li></ul> <p>클로저의 실용 사례</p> <ul><li><p>이전상황을 나중에 일어날 상황과 이어 나갈 때,</p></li> <li><p>함수로 함수를 만들거나 부분 적용 할 때</p></li> <li><p>이벤트 리스너로 함수를 넘기기 전에 이전에 알 수 있던 상황을 변수에 담아 클로저로 기억해두면 이벤트가 발생 했을때 이전 상황을 이어 갈 수 있다.</p></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">_map</span><span class="token punctuation">(</span>users<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> button <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;button&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	button<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'님을 팔로잉 하시겠습니까'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">follow</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> button<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">follow</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/follow'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>userId <span class="token punctuation">:</span> user<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>새로운 실행 컨텍스트를 만들거 주기 때문</li> <li>서로 다른 실행 컨텍스트에 영향을 줄 수 있을 만한 상태 공유나 상태 변화를 만들지 않는것이 목표.</li></ul> <p>고차함수</p> <ul><li>함수를 다루는 함수</li></ul> <ol><li>함수를 인자로 받아 대신 실행 하는 함수</li> <li>함수를 리턴하는 함수</li> <li>함수를 인자로 받아서 또 다른 함수를 이턴하는 함수</li></ol> <p>응용형 프로그래밍 : 함수를 인자로 받아 내부에서 실행하면서 받아 둔 함수에 자신이 알고 있는 값을 적용</p> <p>함수형 프로그래밍은 응용형 함수와 고차함수들을 만들고 클로저, 인자합성 등의 함수적 기능을 활용해 부분적용, 함수 합성을 다루는 함수들로 만들어간다.</p> <p>콜백함수라 잘못 불리는 보조 함수</p> <ul><li><p>콜백함수를 받아 자신이 해야 할 일을 모두 끝낸 후 결과를 돌려주는 함수도 고차함수다.</p></li> <li><p>콜백함수는 컨텍스트를 다시 돌려주는 단순한 협업로직, 종료가 되었을때 한번만 실행이 됨</p></li> <li><p>iteratee, predicate, listener는 여러번 실행이 되며 각자 다른 역할을 함</p></li> <li><p>모든 익명함수를 콜백이라 하지 말자</p></li> <li><p>약속 된 개수의 인자를 미리 받아둔 다음 클로저로 만들어 진 함수가 추가적인 인자를 받아 로직을 완성하는 패턴, 기억하는 인자 혹은 변수가 있는 클로저를 리텅, 부분적용</p></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">callWith</span><span class="token punctuation">(</span><span class="token parameter">val1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val2<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">func</span><span class="token punctuation">(</span>val1<span class="token punctuation">,</span> val2<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

val callWith10 <span class="token operator">=</span> <span class="token function">callWith</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">callWith10</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> add<span class="token punctuation">)</span>
</code></pre></div><ul><li></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> add10 <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">add10</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>bind 함수는 인자를 왼쪽에서 부터 순서대로만 적용 할 수 있음, 바인드를 한번 실핼하면 this는 바꿀 수 가 없다, 인자가 3개인데 두번째것만 적용해 두고 싶으면??</li> <li>_.curry 는 함수가 필요로 하는 인자의 개수가 모두 채워질 때 까지는 실행이 되지 않다가 인자이 수가 모두 채워지는 시점에 실행된다. 인자의 수나 형이 미리 정해져 있어야됨.</li></ul> <p>존레식의 partial</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">partial</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> args <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> arg <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//arguments 인덱스</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> arg <span class="token operator">&lt;</span> argments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>arg<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>arg<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">abc</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> ac <span class="token operator">=</span> abc<span class="token punctuation">.</span><span class="token function">partial</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ac</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>undefined로 인자를 사용하고 싶으면?</li> <li>나중에 실행할 함수의 인자만큼 미리 채워 놓아야됨</li> <li>한번 실행 한 후 재사용 한다면</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		result <span class="token operator">+=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
	<span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token keyword">var</span> add2 <span class="token operator">=</span> add<span class="token punctuation">.</span><span class="token function">partial</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">add2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>

<span class="token keyword">var</span> add3 <span class="token operator">=</span> add<span class="token punctuation">.</span><span class="token function">partial</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">add3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 15</span>
<span class="token function">add3</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token comment">// 15)</span>
</code></pre></div><p>원본 덮이지 않게 살려 두게 리펙토링</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">partial</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> _args <span class="token operator">=</span> arguments<span class="token punctuation">;</span><span class="token comment">// 원본</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 함수 실행 될때 마다 원본 담아놓음</span>
		<span class="token keyword">var</span> arg <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//arguments 인덱스</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> arg <span class="token operator">&lt;</span> argments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>arg<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>arg<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>언더스코어 partial</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> ac<span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">partial</span><span class="token punctuation">(</span>abc<span class="token punctuation">,</span> _<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ac</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> bj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token punctuation">:</span> <span class="token string">'BJ'</span><span class="token punctuation">,</span>
    greet<span class="token punctuation">:</span> _<span class="token punctuation">.</span><span class="token function">partial</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> b
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'저는'</span> <span class="token punctuation">,</span><span class="token string">'입니다'</span>
<span class="token punctuation">}</span>

bj<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 저는 BJ입니다.</span>
bj<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name <span class="token punctuation">:</span> <span class="token string">'HA'</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 저는 HA입니다.</span>
<span class="token keyword">var</span> greetPj <span class="token operator">=</span> bj<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name <span class="token punctuation">:</span> <span class="token string">'PJ'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">greetPj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 저는 PJ입니다.</span>
bj<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 저는 BJ입니다.</span>

</code></pre></div><ul><li>자리 확보 안함, 뒤에 들어오는 인자들 다 넘김</li> <li>this를 적용해 두지 않아서 메소드 처럼 사용 가능</li></ul></div> <div id="disqus_thread"></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/mmmoikim/moilog/edit/master/docs/post/javascript/functional-programming.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
          ← <a href="/moilog/post/javascript/es-modules.html" class="prev">
            es-modules
          </a></span> <span class="next"><a href="/moilog/post/javascript/modern-browser.html">
            모던 웹 브라우저
          </a> →
        </span></p> </div></div></div></div></div>
    <script src="/moilog/assets/js/app.ae515986.js" defer></script><script src="/moilog/assets/js/31.9dba47c1.js" defer></script>
  </body>
</html>
